{%  extends "@EzPublishCore/content_fields.html.twig"  %}

{% block seometas_field %}
    {% set isTheCanonicalFound = false %}
    {% set isTheTitleFound = false %}
    {% for meta_name, meta_content in field.value.metas|filter((meta_content) => meta_content is not empty) %}
        {% if meta_content is not empty %}
            {% if meta_name is same as("title") %}
                <title>{{ meta_content }}</title>
                {% set isTheTitleFound = true %}
            {% elseif meta_name is same as("canonical") %}
                <link rel="canonical" href="{{ meta_content }}" />
                {% set isTheCanonicalFound = true %}
            {% elseif 'image' in meta_name|trim or 'card' in meta_name|trim or 'url' in meta_name|trim %}
                <meta property="{{ meta_name }}" content="{{ meta_content }}"/>
            {% elseif meta_name|trim starts with "og" %}
                <meta property="{{ meta_name }}" content="{{ meta_content }}"/>
            {% else %}
                <meta name="{{ meta_name }}" content="{{ meta_content }}"/>
            {% endif %}
        {% else %}
            {% if meta_name is same as("title") %}
                {% set isTheTitleFound = true %}
                <title>{{ meta_content }}</title>
            {% else %}
                <meta name="{{ meta_name }}" content="{{ meta_content }}"/>
            {% endif %}
        {% endif %}
    {% endfor %}
    {% if contentInfo.mainLocationId is defined and contentInfo.mainLocationId is not null and isTheCanonicalFound is same as(false) %}
        <link rel="canonical" href="{{ url( 'ez_urlalias', {'locationId': contentInfo.mainLocationId} ) }}" />
    {% endif %}
    {% if isTheTitleFound is same as(false) %}
        <title>{{ ez_content_name( contentInfo ) }}</title>
    {% endif %}
{% endblock %}
